env int BUFFER_SIZE = 4;

reactiveclass Sensor(3) {
	statevars{
		CompUnit cu;
	}
	
	Sensor(CompUnit cu1) {
		cu = cu1;
		self.gatherData();
	}
	
	msgsrv gatherData() {
		cu.receiveData(0);
		self.gatherData() after(?(1,2,3));
	}
}


reactiveclass CompUnit(3) {
	statevars {
		Networkk networkk;
	}
	
	CompUnit(Networkk net) {
		networkk = net;
	}

	msgsrv receiveData(byte data) {
		networkk.send(data);
	}
	
}

interface Networkk {
	msgsrv send(byte data);
}

reactiveclass MACBNetwork implements Networkk(3) {
	msgsrv send(byte data) {
		// Send data according 
		// to the MACB protocol
	}
}

reactiveclass TDMANetwork implements Networkk(3) {
	msgsrv send(byte data) {
		// Send data according
		// to the TDMA protocol
	}
}

main {
	Sensor sensor():(cu);
	CompUnit cu():(networkk);
	TDMANetwork networkk():();
}
